<div class="container">
  <% if params[:search][:word].present? %>
    <h2 class="text-center">"<%=params[:search][:word] %>" 検索結果一覧</h2>
  <% else %>
    <h2 class="text-center">検索結果一覧</h2>
  <% end %>
  <!--検索に使用されたタグ名を表示する-->
  <!--< if params[:seardh][:tag_ids].tag_ids.present? && tag_ids[1].present? %>-->
  <!--  < Tag.where(id: params[:seardh][:tag_ids]).each do |tag| %>-->
  <!--    <span class="tag mb-1">-->
  <!--      <= tag.tag_name %>-->
  <!--    </span>-->
  <!--  < end %>-->
  <!--< end %>-->
    <!--アイテム絞り込みフィールド-->
    <div class="accordion" id="accordionExample">

        <h5 class="mb-0 text-right">
          <button class="btn btn-outline-primary" id="headingOne" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            絞り込み
          </button>
        </h5>

      <div class="card mb-4">

        <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
          <div class="card-body">
            <%= form_with scope: :search, url: search_all_contents_path, method: :get, local:true do |f| %>
              <div class="d-flex justify-content-end mb-2">
                <div class="custom-control custom-switch mr-3">
                  <%= f.check_box :only_myfavorites, {class: "custom-control-input"}, true, false %>
                  <%= f.label :only_myfavorites, "お気に入りのみ表示する", class: "custom-control-label" %>
                </div>
                <%= f.submit "絞り込み条件のクリア", type: :reset, class: "btn btn-sm btn-outline-secondary" %>
              </div>
              <div class="form-group">
                <%= f.search_field :word, placeholder: "検索ワードはこちら", class: "form-control"%>
              </div>
              <p class="mt-3 mb-2">タグで絞り込み</p>
              <div class="tag-checkbox-aria">
                <div class="form-check">
                  <!--タグ付け数の多いタグ50を、名前順に表示-->
                  <%= f.collection_check_boxes :tag_ids, Tag.joins(:tag_maps).group(:tag_id).hottest(50).order(:tag_name), :id, :tag_name, class: "form-check-input" %>
                </div>
              </div>
              <div class="text-center">
                <%= f.submit "絞り込み", class: "btn btn-success" %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <!--ブログ、パッキング、アイテムの検索結果をそれぞれのタブで表示-->
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="blog-tab" data-toggle="tab" href="#blog" role="tab" aria-controls="blog" aria-selected="true">ブログ(<%= @blogs.count %>)</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="packing-tab" data-toggle="tab" href="#packing" role="tab" aria-controls="packing" aria-selected="false">パッキング(<%= @packings.count %>)</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="item-tab" data-toggle="tab" href="#item" role="tab" aria-controls="item" aria-selected="false">アイテム(<%= @items.count %>)</a>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="blog" role="tabpanel" aria-labelledby="blog-tab">
      <div id="blogs-index">
        <%= render 'blogs/index', blogs: @blogs %>
      </div>
    </div>
    <div class="tab-pane fade" id="packing" role="tabpanel" aria-labelledby="packing-tab">
      <div id="packings-index">
        <%= render 'packings/index', packings: @packings %>
      </div>
    </div>
    <div class="tab-pane fade" id="item" role="tabpanel" aria-labelledby="item-tab">
      <div id="items-index">
        <%= render 'items/index', items: @items %>
      </div>
    </div>
  </div>
</div>